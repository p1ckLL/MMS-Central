<!DOCTYPE html>
<html>

<head>
  <title>MMS CENTRAL</title>
  <link rel=stylesheet href=style.css>
</head>

<body>
  <ul id="messages"></ul>
  <form id="form" action="">
    <input id="input" placeholder="Message" autocomplete="off" />
    <input id="author" placeholder="Username" autocomplete="off" />
    <button>Send</button>
  </form>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.js"
    integrity="sha512-MgkNs0gNdrnOM7k+0L+wgiRc5aLgl74sJQKbIWegVIMvVGPc1+gc1L2oK9Wf/D9pq58eqIJAxOonYPVE5UwUFA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
    var socket = io();

    var messages = document.getElementById('messages');
    var form = document.getElementById('form');
    var input = document.getElementById('input');
    var author = document.getElementById('author')

    form.addEventListener('submit', function (e) {
      e.preventDefault();
      if (input.value) {
        socket.emit('message', [input.value, author.value]);
        input.value = '';
      }
    });

    socket.on('message', function (msgData) {
      console.log("client received message")
      var item = document.createElement('li');
      item.textContent = msgData[1] + ": " + msgData[0];
      messages.appendChild(item);
      window.scrollTo(0, document.body.scrollHeight);
    });
  </script>
</body>

</html>
